{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAuth,signInWithPopup,GoogleAuthProvider,onAuthStateChanged,signInWithEmailAndPassword}from'firebase/auth';import{app}from'./firebase';import{collection,addDoc,serverTimestamp,getDocs,orderBy,query}from'firebase/firestore';import{db,analytics}from'./firebase';import'./App.css';import{signOut}from\"firebase/auth\";import{deleteDoc,doc}from\"firebase/firestore\";import{Link,Routes,Route}from'react-router-dom';import PrivacyPolicy from'./pages/PrivacyPolicy';import TermsOfUse from'./pages/TermsOfUse';import Register from'./pages/Register';import ForgotPassword from'./pages/ForgotPassword';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{logEvent}from\"firebase/analytics\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Header(){return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-blue-600 text-white p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"flex space-x-6\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/privacypolicy\",className:\"hover:text-gray-300\",children:\"\\u0633\\u064A\\u0627\\u0633\\u0629 \\u0627\\u0644\\u062E\\u0635\\u0648\\u0635\\u064A\\u0629\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/termsofuse\",className:\"hover:text-gray-300\",children:\"\\u0634\\u0631\\u0648\\u0637 \\u0627\\u0644\\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"hover:text-gray-300\",children:\"\\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-white\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/secret.png\",alt:\"\\u0634\\u0639\\u0627\\u0631 \\u0627\\u0644\\u0645\\u0648\\u0642\\u0639\",className:\"h-8\"})})})]});}function App(){const[user,setUser]=useState(null);const[nickname,setNickname]=useState('');const[message,setMessage]=useState('');const[sent,setSent]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[messages,setMessages]=useState([]);const[showPassword,setShowPassword]=useState(false);const[password,setPassword]=useState('');const[switchOn,setSwitchOn]=useState(false);const[charCount,setCharCount]=useState(0);const[loading,setLoading]=useState(true);const[isModalOpen,setIsModalOpen]=useState(false);const[selectedMessage,setSelectedMessage]=useState(null);const[email,setEmail]=useState('');const[showPopup,setShowPopup]=useState(true);const maxCharCount=500;const auth=getAuth(app);const adminEmail=\"adham.gh1111@gmail.com\";const handleLogin=async()=>{try{if(!email.trim()){toast.error(\"من فضلك أدخل البريد الإلكتروني\");return;}if(!password){toast.error(\"من فضلك أدخل كلمة المرور\");return;}await signInWithEmailAndPassword(auth,email.trim(),password);toast.success(\"تم تسجيل الدخول بنجاح!\");}catch(err){console.error(\"خطأ أثناء تسجيل الدخول: \",err.code);switch(err.code){case'auth/invalid-email':toast.error(\"البريد الإلكتروني غير صالح.\");break;case'auth/user-not-found':toast.error(\"البريد الإلكتروني غير موجود.\");break;case'auth/wrong-password':toast.error(\"كلمة المرور غير صحيحة.\");break;default:toast.error(\"حدث خطأ غير معروف أثناء تسجيل الدخول.\");}}};const handleGoogleLogin=async()=>{const provider=new GoogleAuthProvider();try{await signInWithPopup(auth,provider);}catch(err){alert(\"حدث خطأ أثناء تسجيل الدخول باستخدام جوجل\");console.error(err);}};const handleLogout=()=>{const confirmLogout=window.confirm(\"هل أنت متأكد من تسجيل الخروج؟\");if(confirmLogout){signOut(auth).then(()=>console.log(\"تم تسجيل الخروج\")).catch(error=>console.error(\"خطأ:\",error));}else{console.log(\"تم إلغاء عملية تسجيل الخروج\");}};const sanitizeMessage=message=>{const div=document.createElement('div');div.textContent=message;return div.innerHTML;};const handleSendMessage=async e=>{e.preventDefault();if(!user)return alert(\"يجب تسجيل الدخول أولاً!\");if(!nickname.trim()||!message.trim())return alert(\"يرجى ملء جميع الحقول!\");const safeNickname=sanitizeMessage(nickname);const safeMessage=sanitizeMessage(message);try{const docRef=await addDoc(collection(db,'messages'),{nickname:safeNickname,message:safeMessage,uid:user.uid,createdAt:serverTimestamp()});console.log(\"تم إرسال الرسالة بنجاح: \",docRef.id);setSent(true);setMessage('');setNickname('');}catch(error){alert(\"حدث خطأ أثناء إرسال الرسالة\");console.error(error);}};const togglePassword=()=>{setShowPassword(!showPassword);};const toggleSwitch=()=>{setSwitchOn(!switchOn);if(!switchOn){alert(\"جميع معلوماتك سرية الان\");}else{alert(\"سيتم الان إظهار معلوماتك الشخصية \");}};const handleMessageChange=e=>{const newMessage=e.target.value;if(newMessage.length<=maxCharCount){setMessage(newMessage);setCharCount(newMessage.length);}};const handleDeleteMessage=async id=>{const confirmDelete=window.confirm(\"هل تريد حذف هذه الرسالة؟\");if(confirmDelete){try{await deleteDoc(doc(db,\"messages\",id));setMessages(messages.filter(msg=>msg.id!==id));alert(\"تم حذف الرسالة بنجاح\");}catch(error){console.error(\"خطأ أثناء الحذف:\",error);alert(\"حدث خطأ أثناء حذف الرسالة\");}}};const handleShowDetails=message=>{setSelectedMessage(message);setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);};useEffect(()=>{logEvent(analytics,'page_view');const unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setIsAdmin((currentUser===null||currentUser===void 0?void 0:currentUser.email)===adminEmail);setLoading(false);if(!currentUser){setShowPopup(true);}else{setShowPopup(false);logEvent(analytics,'user_login',{user_email:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||\"unknown\"});}});return()=>unsubscribe();},[auth]);useEffect(()=>{const fetchMessages=async()=>{if(isAdmin){const q=query(collection(db,'messages'),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const fetchedMessages=querySnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));console.log(fetchedMessages);setMessages(fetchedMessages);setShowPopup(true);}};fetchMessages();},[isAdmin,auth]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\" \"});}const closePopup=()=>{setShowPopup(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{children:[showPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Mahmoud \\u0623\\u0631\\u0633\\u0644 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u0645\\u062C\\u0647\\u0648\\u0644\\u0629 \\u0625\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0646\\u062D\\u0646 \\u0633\\u0639\\u062F\\u0627\\u0621 \\u0628\\u0632\\u064A\\u0627\\u0631\\u062A\\u0643 ! \\u0625\\u0630\\u0627 \\u0643\\u0646\\u062A \\u0628\\u062D\\u0627\\u062C\\u0629 \\u0625\\u0644\\u0649 \\u0645\\u0633\\u0627\\u0639\\u062F\\u0629\\u060C \\u0644\\u0627 \\u062A\\u062A\\u0631\\u062F\\u062F \\u0641\\u064A \\u0627\\u0644\\u0627\\u062A\\u0635\\u0627\\u0644 \\u0628\\u0646\\u0627.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:closePopup,children:\"\\u0625\\u063A\\u0644\\u0627\\u0642\"})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/privacypolicy\",element:/*#__PURE__*/_jsx(PrivacyPolicy,{})}),/*#__PURE__*/_jsx(Route,{path:\"/termsofuse\",element:/*#__PURE__*/_jsx(TermsOfUse,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgotpassword\",element:/*#__PURE__*/_jsx(ForgotPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:loading?/*#__PURE__*/_jsx(\"div\",{children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md text-center\",children:[user&&isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"text-right mb-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062E\\u0631\\u0648\\u062C\"})}),!user?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"input-email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0628\\u0631\\u064A\\u062F\\u0643 \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",value:password,onChange:e=>setPassword(e.target.value),className:\"input-field\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"showPassword\",className:\"checkbox-label\",children:\"\\u0639\\u0631\\u0636 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"showPassword\",checked:showPassword,onChange:togglePassword})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,disabled:loading,className:\"bg-blue-500 text-white px-4 py-2 rounded-xl hover:bg-blue-600 w-full\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register-prompt\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-black\",children:\"\\u0644\\u064A\\u0633 \\u0644\\u062F\\u064A\\u0643 \\u062D\\u0633\\u0627\\u0628\\u061F \"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"register-link text-blue-600 hover:text-blue-800\",children:\"\\u0633\\u062C\\u0644 \\u062D\\u0633\\u0627\\u0628\\u0643 \\u0627\\u0644\\u0622\\u0646\"})]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",children:\"\\u0647\\u0644 \\u0646\\u0633\\u064A\\u062A \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\\u061F\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold mb-4\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u062E\\u0648\\u0644 \\u0645\\u0628\\u0627\\u0634\\u0631\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoogleLogin,className:\"bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 w-full flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-google\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0628\\u062D\\u0633\\u0627\\u0628 \\u062C\\u0648\\u062C\\u0644\"})]})]})]}):isAdmin?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-2\",children:\"\\uD83D\\uDCE8 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0626\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0626\\u0644\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"messages-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0627\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u062D\\u0630\\u0641\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:messages.map(msg=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:msg.nickname}),/*#__PURE__*/_jsxs(\"td\",{children:[msg.message.substring(0,50),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(msg.createdAt.seconds*1000).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleShowDetails(msg),className:\"details-btn\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteMessage(msg.id),className:\"delete-btn\",children:\"\\u062D\\u0630\\u0641\"})})]},msg.id))})]}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0639\\u0627\\u0631:\"}),\" \",selectedMessage.nickname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629 \\u0643\\u0627\\u0645\\u0644\\u0629:\"}),\" \",selectedMessage.message]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseModal,className:\"close-btn\",children:\"\\u0625\\u063A\\u0644\\u0627\\u0642\"})]})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"  Mahmoud \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u0645\\u062C\\u0647\\u0648\\u0644\\u0629 .\\u0627\\u0644\\u064A \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0627\\u0633\\u0645\\u0643 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0639\\u0627\\u0631\",value:nickname,onChange:e=>setNickname(e.target.value),className:\"input-field\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0631\\u0633\\u0627\\u0644\\u062A\\u0643 \\u0647\\u0646\\u0627 \\u0628\\u062F\\u0648\\u0646 \\u0627\\u0646 \\u064A\\u0639\\u0631\\u0641\\u0643...\",value:message,onChange:handleMessageChange,className:\"textarea-field\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[charCount,\"/\",maxCharCount]}),charCount===maxCharCount&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"\\u0644\\u0642\\u062F \\u0648\\u0635\\u0644\\u062A \\u0625\\u0644\\u0649 \\u0627\\u0644\\u062D\\u062F \\u0627\\u0644\\u0623\\u0642\\u0635\\u0649!\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:charCount>maxCharCount,className:\"submit-button mt-4\",children:\"\\u0625\\u0631\\u0633\\u0627\\u0644 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629\"}),sent&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 mt-3\",children:\"\\u062A\\u0645 \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0631\\u0633\\u0627\\u0644\\u062A\\u0643 \\u0628\\u0646\\u062C\\u0627\\u062D \\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end items-center mt-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-lg font-semibold\",children:switchOn?\"بشكل سري\":\"بشكل غير سري\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"switch small\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:switchOn,onChange:toggleSwitch}),/*#__PURE__*/_jsx(\"span\",{className:\"slider\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleLogout,className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full px-4 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062E\\u0631\\u0648\\u062C\"})})})]})]})})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","getAuth","signInWithPopup","GoogleAuthProvider","onAuthStateChanged","signInWithEmailAndPassword","app","collection","addDoc","serverTimestamp","getDocs","orderBy","query","db","analytics","signOut","deleteDoc","doc","Link","Routes","Route","PrivacyPolicy","TermsOfUse","Register","ForgotPassword","ToastContainer","toast","logEvent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","className","children","to","src","alt","App","user","setUser","nickname","setNickname","message","setMessage","sent","setSent","isAdmin","setIsAdmin","messages","setMessages","showPassword","setShowPassword","password","setPassword","switchOn","setSwitchOn","charCount","setCharCount","loading","setLoading","isModalOpen","setIsModalOpen","selectedMessage","setSelectedMessage","email","setEmail","showPopup","setShowPopup","maxCharCount","auth","adminEmail","handleLogin","trim","error","success","err","console","code","handleGoogleLogin","provider","alert","handleLogout","confirmLogout","window","confirm","then","log","catch","sanitizeMessage","div","document","createElement","textContent","innerHTML","handleSendMessage","e","preventDefault","safeNickname","safeMessage","docRef","uid","createdAt","id","togglePassword","toggleSwitch","handleMessageChange","newMessage","target","value","length","handleDeleteMessage","confirmDelete","filter","msg","handleShowDetails","handleCloseModal","unsubscribe","currentUser","user_email","fetchMessages","q","querySnapshot","fetchedMessages","docs","map","data","closePopup","onClick","path","element","type","onChange","placeholder","htmlFor","checked","disabled","substring","Date","seconds","toLocaleString","onSubmit"],"sources":["C:/Users/Lenovo/Downloads/anonymous-messages/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged,signInWithEmailAndPassword } from 'firebase/auth';\nimport { app } from './firebase'; \nimport { collection, addDoc, serverTimestamp, getDocs, orderBy, query } from 'firebase/firestore';\nimport { db,analytics} from './firebase'; \nimport './App.css';\nimport { signOut } from \"firebase/auth\";\nimport { deleteDoc, doc } from \"firebase/firestore\"; \nimport { Link, Routes, Route } from 'react-router-dom';\nimport PrivacyPolicy from './pages/PrivacyPolicy';\nimport TermsOfUse from './pages/TermsOfUse';\nimport Register from './pages/Register'; \nimport ForgotPassword from './pages/ForgotPassword'; \nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { logEvent } from \"firebase/analytics\";\n\nfunction Header() {\n  return (\n    <header className=\"bg-blue-600 text-white p-4 flex justify-between items-center\">\n      <nav>\n        <ul className=\"flex space-x-6\">\n          <li>\n            <Link to=\"/privacypolicy\" className=\"hover:text-gray-300\">سياسة الخصوصية</Link>\n          </li>\n          <li>\n            <Link to=\"/termsofuse\" className=\"hover:text-gray-300\">شروط الاستخدام</Link>\n          </li>\n          <li>\n            <Link to=\"/\" className=\"hover:text-gray-300\">الرئيسية</Link>\n          </li>\n        </ul>\n      </nav>\n      <div className=\"text-xl font-bold\">\n        <Link to=\"/\" className=\"text-white\">\n          <img src=\"/secret.png\" alt=\"شعار الموقع\" className=\"h-8\" />\n        </Link>\n      </div>\n    </header>\n  );\n}\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [nickname, setNickname] = useState('');\n  const [message, setMessage] = useState('');\n  const [sent, setSent] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [showPassword, setShowPassword] = useState(false); \n  const [password, setPassword] = useState('');\n  const [switchOn, setSwitchOn] = useState(false); \n  const [charCount, setCharCount] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false); \n  const [selectedMessage, setSelectedMessage] = useState(null); \n  const [email,setEmail] = useState('');\n  const [showPopup, setShowPopup] = useState(true); \n\n\n  const maxCharCount = 500;\n  const auth = getAuth(app);\n  const adminEmail = \"adham.gh1111@gmail.com\"; \n\n\n  const handleLogin = async () => {\n    try {\n      if (!email.trim()) {\n        toast.error(\"من فضلك أدخل البريد الإلكتروني\");\n        return;\n      }\n  \n      if (!password) {\n        toast.error(\"من فضلك أدخل كلمة المرور\");\n        return;\n      }\n  \n      await signInWithEmailAndPassword(auth, email.trim(), password);\n      toast.success(\"تم تسجيل الدخول بنجاح!\");\n    } catch (err) {\n      console.error(\"خطأ أثناء تسجيل الدخول: \", err.code);\n      switch (err.code) {\n        case 'auth/invalid-email':\n          toast.error(\"البريد الإلكتروني غير صالح.\");\n          break;\n        case 'auth/user-not-found':\n          toast.error(\"البريد الإلكتروني غير موجود.\");\n          break;\n        case 'auth/wrong-password':\n          toast.error(\"كلمة المرور غير صحيحة.\");\n          break;\n        default:\n          toast.error(\"حدث خطأ غير معروف أثناء تسجيل الدخول.\");\n      }\n    }\n  };\n  \n  \n  const handleGoogleLogin = async () => {\n    const provider = new GoogleAuthProvider();\n    try {\n      await signInWithPopup(auth, provider);\n    } catch (err) {\n      alert(\"حدث خطأ أثناء تسجيل الدخول باستخدام جوجل\");\n      console.error(err);\n    }\n  };\n\n  const handleLogout = () => {\n    const confirmLogout = window.confirm(\"هل أنت متأكد من تسجيل الخروج؟\");\n  \n    if (confirmLogout) {\n      signOut(auth)\n        .then(() => console.log(\"تم تسجيل الخروج\"))\n        .catch((error) => console.error(\"خطأ:\", error));\n    } else {\n      console.log(\"تم إلغاء عملية تسجيل الخروج\");\n    }\n  };\n\nconst sanitizeMessage = (message) => {\n  const div = document.createElement('div');\n  div.textContent = message;\n  return div.innerHTML;\n};\n\nconst handleSendMessage = async (e) => {\n  e.preventDefault(); \n\n  if (!user) return alert(\"يجب تسجيل الدخول أولاً!\");\n  if (!nickname.trim() || !message.trim()) return alert(\"يرجى ملء جميع الحقول!\");\n\n  const safeNickname = sanitizeMessage(nickname);\n  const safeMessage = sanitizeMessage(message);\n\n  try {\n    const docRef = await addDoc(collection(db, 'messages'), {\n      nickname: safeNickname,\n      message: safeMessage,\n      uid: user.uid,\n      createdAt: serverTimestamp()\n    });\n\n    console.log(\"تم إرسال الرسالة بنجاح: \", docRef.id); \n    setSent(true);\n    setMessage('');\n    setNickname('');\n  } catch (error) {\n    alert(\"حدث خطأ أثناء إرسال الرسالة\");\n    console.error(error);\n  }\n};\n\n\n  const togglePassword = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const toggleSwitch = () => {\n    setSwitchOn(!switchOn);\n\n    if (!switchOn) {\n      alert(\"جميع معلوماتك سرية الان\");\n    } else {\n      alert(\"سيتم الان إظهار معلوماتك الشخصية \");\n    }\n  };\n\n  const handleMessageChange = (e) => {\n    const newMessage = e.target.value;\n    if (newMessage.length <= maxCharCount) {\n      setMessage(newMessage);\n      setCharCount(newMessage.length); \n    }\n  };\n  const handleDeleteMessage = async (id) => {\n    const confirmDelete = window.confirm(\"هل تريد حذف هذه الرسالة؟\");\n  \n    if (confirmDelete) {\n      try {\n        await deleteDoc(doc(db, \"messages\", id));\n        setMessages(messages.filter((msg) => msg.id !== id)); \n        alert(\"تم حذف الرسالة بنجاح\");\n      } catch (error) {\n        console.error(\"خطأ أثناء الحذف:\", error);\n        alert(\"حدث خطأ أثناء حذف الرسالة\");\n      }\n    }\n  };\n  const handleShowDetails = (message) => {\n    setSelectedMessage(message);\n    setIsModalOpen(true); \n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false); \n  };\n    \n  \n\n  useEffect(() => {\n    logEvent(analytics, 'page_view');\n  \n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      setIsAdmin(currentUser?.email === adminEmail);\n      setLoading(false);\n  \n      if (!currentUser) {\n        setShowPopup(true);   \n      } else {\n        setShowPopup(false);\n  \n        logEvent(analytics, 'user_login', {\n          user_email: currentUser?.email || \"unknown\",\n        });\n        \n      }\n    });\n  \n    return () => unsubscribe();\n  }, [auth]);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (isAdmin) {\n        const q = query(collection(db, 'messages'), orderBy('createdAt', 'desc'));\n        const querySnapshot = await getDocs(q);\n        const fetchedMessages = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        console.log(fetchedMessages);\n        setMessages(fetchedMessages);\n        setShowPopup(true);\n      }\n    };\n  \n    fetchMessages();\n  }, [isAdmin, auth]);\n  if (loading) {\n    return <div> </div>; \n  }\n\n\n  const closePopup = () => {\n    setShowPopup(false);  \n  };\n\n\n  return (\n    <>\n      <Header />\n      <div>\n      {showPopup && (\n        <div className=\"popup\">\n          <div className=\"popup-content\">\n          <h2> Mahmoud أرسل رسالة مجهولة إلي</h2>\n            <p>نحن سعداء بزيارتك ! إذا كنت بحاجة إلى مساعدة، لا تتردد في الاتصال بنا.</p>\n            <button className=\"close-btn\" onClick={closePopup}>إغلاق</button>\n          </div>\n        </div>\n      )}\n\n      <Routes>\n        <Route path=\"/privacypolicy\" element={<PrivacyPolicy />} />\n        <Route path=\"/termsofuse\" element={<TermsOfUse />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/forgotpassword\" element={<ForgotPassword />} /> \n        <Route path=\"/\" element={loading ? <div>جاري التحميل...</div> : (\n          <div className=\"min-h-screen flex items-center justify-center bg-gray-100 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md text-center\">\n              {user && isAdmin && (\n                <div className=\"text-right mb-4\">\n                  <button\n                    onClick={handleLogout}\n                    className=\"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition\"\n                  >\n                    تسجيل الخروج\n                  </button>\n                </div>\n              )}\n\n              {!user ? (\n                <div className=\"space-y-8\">\n                  <div className=\"border p-4 rounded-xl shadow-sm\">\n                    <h2 className=\"text-lg font-bold mb-4\">تسجيل الدخول</h2>\n\n                    <input\n                       type=\"email\"\n                       className=\"input-email\"\n                       value={email}\n                       onChange={(e) => setEmail(e.target.value)}\n                       placeholder=\"أدخل بريدك الإلكتروني\"\n                       />\n\n                    <input\n                      type={showPassword ? \"text\" : \"password\"}\n                      placeholder=\"كلمة المرور\"\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      className=\"input-field\"\n                    />\n                    <div className=\"checkbox-container\">\n                      <label htmlFor=\"showPassword\" className=\"checkbox-label\">عرض كلمة المرور</label>\n                      <input\n                        type=\"checkbox\"\n                        id=\"showPassword\"\n                        checked={showPassword}\n                        onChange={togglePassword}\n                      />\n                    </div>\n                    <button \n                            onClick={handleLogin} disabled={loading}\n                            className=\"bg-blue-500 text-white px-4 py-2 rounded-xl hover:bg-blue-600 w-full\">\n                             تسجيل الدخول \n                    </button>\n                    <div className=\"register-prompt\">\n                       <p><span className=\"text-black\">ليس لديك حساب؟ </span>\n                          <Link to=\"/register\" className=\"register-link text-blue-600 hover:text-blue-800\">\n                           سجل حسابك الآن\n                          </Link>\n                       </p>\n                      </div>\n                      <p>\n  <Link to=\"/forgotpassword\">هل نسيت كلمة المرور؟</Link>\n</p>\n                  </div>\n                  <div className=\"border p-4 rounded-xl shadow-sm\">\n                    <h2 className=\"text-lg font-bold mb-4\">تسجيل دخول مباشر</h2>\n                    <button\n                      onClick={handleGoogleLogin}\n                      className=\"bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 w-full flex items-center justify-center space-x-2\"\n                    >\n                      <i className=\"fab fa-google\"></i>\n                      <span>تسجيل الدخول بحساب جوجل</span>\n                    </button>\n                  </div>\n                </div>\n              ) : isAdmin ? (\n                <div>\n                  <h2 className=\"text-lg font-semibold mb-2\">📨 جميع الرسائل</h2>\n                  <div className=\"messages-container\">\n                    <h2>جميع الرسائل</h2>\n                    <table className=\"messages-table\">\n                      <thead>\n                        <tr>\n                          <th>الاسم</th>\n                          <th>الرسالة</th>\n                          <th>التاريخ</th>\n                          <th>التفاصيل</th>\n                          <th>حذف</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {messages.map((msg) => (\n                          <tr key={msg.id}>\n                            <td>{msg.nickname}</td>\n                            <td>{msg.message.substring(0, 50)}...</td>\n                            <td>{new Date(msg.createdAt.seconds * 1000).toLocaleString()}</td>\n                            <td>\n                              <button onClick={() => handleShowDetails(msg)} className=\"details-btn\">\n                                تفاصيل\n                              </button>\n                            </td>\n                            <td>\n                              <button onClick={() => handleDeleteMessage(msg.id)} className=\"delete-btn\">\n                                حذف\n                              </button>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n\n                    {isModalOpen && (\n                      <div className=\"modal-overlay\">\n                        <div className=\"modal-content\">\n                          <h3>تفاصيل الرسالة</h3>\n                          <p><strong>الاسم المستعار:</strong> {selectedMessage.nickname}</p>\n                          <p><strong>الرسالة كاملة:</strong> {selectedMessage.message}</p>\n                          <button onClick={handleCloseModal} className=\"close-btn\">إغلاق</button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <form onSubmit={handleSendMessage} className=\"form-container\">\n                    <h2 className=\"text-xl font-semibold mb-4\">  Mahmoud إرسال رسالة مجهولة .الي </h2>\n                    <input\n                      type=\"text\"\n                      placeholder=\"اسمك المستعار\"\n                      value={nickname}\n                      onChange={(e) => setNickname(e.target.value)}\n                      className=\"input-field\"\n                    />\n                    <textarea\n                      placeholder=\"اكتب رسالتك هنا بدون ان يعرفك...\"\n                      value={message}\n                      onChange={handleMessageChange}\n                      className=\"textarea-field\"\n                    />\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span>{charCount}/{maxCharCount}</span>\n                      {charCount === maxCharCount && <span className=\"text-red-500\">لقد وصلت إلى الحد الأقصى!</span>}\n                    </div>\n                    <button\n                      type=\"submit\"\n                      disabled={charCount > maxCharCount}\n                      className=\"submit-button mt-4\"\n                    >\n                      إرسال الرسالة\n                    </button>\n                    {sent && <p className=\"text-green-500 mt-3\">تم إرسال رسالتك بنجاح ✅</p>}\n                    <div className=\"flex justify-end items-center mt-6\">\n                      <span className=\"ml-3 text-lg font-semibold\">{switchOn ? \"بشكل سري\" : \"بشكل غير سري\"}</span>\n                      <label className=\"switch small\">\n                        <input type=\"checkbox\" checked={switchOn} onChange={toggleSwitch} />\n                        <span className=\"slider\"></span>\n                      </label>\n                    </div>\n                  </form>\n                  <div className=\"mt-6\">\n                    <form onSubmit={handleLogout} className=\"text-center\">\n                      <button\n                        type=\"submit\"\n                        className=\"w-full px-4 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700\"\n                      >\n                        تسجيل الخروج\n                      </button>\n                    </form>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        )}\n        />\n      </Routes>\n      <ToastContainer/>\n      </div>\n\n    </>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}