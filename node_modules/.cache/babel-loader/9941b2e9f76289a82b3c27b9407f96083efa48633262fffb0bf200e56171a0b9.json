{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\anonymous-messages\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from 'firebase/auth';\nimport { app } from './firebase'; // تأكد أن firebase.js موجود ومُعد فيه Firebase\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [nickname, setNickname] = useState('');\n  const [message, setMessage] = useState('');\n  const [sent, setSent] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const auth = getAuth(app);\n  const provider = new GoogleAuthProvider();\n  const handleLogin = async () => {\n    try {\n      await signInWithPopup(auth, provider);\n    } catch (err) {\n      alert(\"حدث خطأ أثناء تسجيل الدخول\");\n      console.error(err);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!user) return alert(\"يجب تسجيل الدخول أولاً!\");\n    if (!nickname.trim() || !message.trim()) return alert(\"يرجى ملء جميع الحقول!\");\n    try {\n      await addDoc(collection(db, 'messages'), {\n        nickname,\n        message,\n        uid: user.uid,\n        createdAt: serverTimestamp()\n      });\n      setSent(true);\n      setMessage('');\n    } catch (error) {\n      alert(\"حدث خطأ أثناء إرسال الرسالة\");\n      console.error(error);\n    }\n  };\n  useEffect(() => {\n    onAuthStateChanged(auth, currentUser => {\n      setUser(currentUser);\n      setIsAdmin((currentUser === null || currentUser === void 0 ? void 0 : currentUser.email) === adminEmail);\n    });\n  }, []);\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (isAdmin) {\n        const q = query(collection(db, 'messages'), orderBy('createdAt', 'desc'));\n        const querySnapshot = await getDocs(q);\n        const fetchedMessages = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setMessages(fetchedMessages);\n      }\n    };\n    fetchMessages();\n  }, [isAdmin]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-gray-100 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"\\u0623\\u0631\\u0633\\u0644 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u0645\\u062C\\u0647\\u0648\\u0644\\u0629\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), !user ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogin,\n        className: \"bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 mb-4 w-full\",\n        children: \"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0628\\u062D\\u0633\\u0627\\u0628 Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-600 mb-2\",\n        children: [\"\\u062A\\u0645 \\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0643\\u0640 \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0627\\u0633\\u0645\\u0643 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0639\\u0627\\u0631\",\n        value: nickname,\n        onChange: e => setNickname(e.target.value),\n        className: \"border p-2 w-full rounded mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"\\u0627\\u0643\\u062A\\u0628 \\u0631\\u0633\\u0627\\u0644\\u062A\\u0643 \\u0647\\u0646\\u0627...\",\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        className: \"border p-2 w-full rounded mb-3 h-28 resize-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        disabled: !user,\n        className: `w-full px-4 py-2 rounded-xl text-white ${user ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-400 cursor-not-allowed'}`,\n        children: \"\\u0625\\u0631\\u0633\\u0627\\u0644 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0644\\u0629\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), sent && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-500 mt-3\",\n        children: \"\\u062A\\u0645 \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0631\\u0633\\u0627\\u0644\\u062A\\u0643 \\u0628\\u0646\\u062C\\u0627\\u062D \\u2705\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"pyy3vGvKcb2Fw1Z7Lp5yiCgJsBQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","getAuth","signInWithPopup","GoogleAuthProvider","onAuthStateChanged","app","collection","addDoc","serverTimestamp","jsxDEV","_jsxDEV","App","_s","user","setUser","nickname","setNickname","message","setMessage","sent","setSent","isAdmin","setIsAdmin","messages","setMessages","auth","provider","handleLogin","err","alert","console","error","handleSendMessage","trim","db","uid","createdAt","currentUser","email","adminEmail","fetchMessages","q","query","orderBy","querySnapshot","getDocs","fetchedMessages","docs","map","doc","id","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","placeholder","value","onChange","e","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Downloads/anonymous-messages/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from 'firebase/auth';\nimport { app } from './firebase'; // تأكد أن firebase.js موجود ومُعد فيه Firebase\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [nickname, setNickname] = useState('');\n  const [message, setMessage] = useState('');\n  const [sent, setSent] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [messages, setMessages] = useState([]);\n  \n  const auth = getAuth(app);\n  const provider = new GoogleAuthProvider();\n\n  const handleLogin = async () => {\n    try {\n      await signInWithPopup(auth, provider);\n    } catch (err) {\n      alert(\"حدث خطأ أثناء تسجيل الدخول\");\n      console.error(err);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!user) return alert(\"يجب تسجيل الدخول أولاً!\");\n    if (!nickname.trim() || !message.trim()) return alert(\"يرجى ملء جميع الحقول!\");\n  \n    try {\n      await addDoc(collection(db, 'messages'), {\n        nickname,\n        message,\n        uid: user.uid,\n        createdAt: serverTimestamp()\n      });\n  \n      setSent(true);\n      setMessage('');\n    } catch (error) {\n      alert(\"حدث خطأ أثناء إرسال الرسالة\");\n      console.error(error);\n    }\n  };\n  \n\n  useEffect(() => {\n    onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      setIsAdmin(currentUser?.email === adminEmail);\n    });\n  }, []);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (isAdmin) {\n        const q = query(collection(db, 'messages'), orderBy('createdAt', 'desc'));\n        const querySnapshot = await getDocs(q);\n        const fetchedMessages = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setMessages(fetchedMessages);\n      }\n    };\n  \n    fetchMessages();\n  }, [isAdmin]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100 p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md text-center\">\n        <h1 className=\"text-2xl font-bold mb-4\">أرسل رسالة مجهولة</h1>\n\n        {!user ? (\n          <button\n            onClick={handleLogin}\n            className=\"bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 mb-4 w-full\"\n          >\n            تسجيل الدخول بحساب Google\n          </button>\n        ) : (\n          <p className=\"text-green-600 mb-2\">تم تسجيل الدخول كـ {user.email}</p>\n        )}\n\n        <input\n          type=\"text\"\n          placeholder=\"اسمك المستعار\"\n          value={nickname}\n          onChange={(e) => setNickname(e.target.value)}\n          className=\"border p-2 w-full rounded mb-3\"\n        />\n\n        <textarea\n          placeholder=\"اكتب رسالتك هنا...\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          className=\"border p-2 w-full rounded mb-3 h-28 resize-none\"\n        />\n\n        <button\n          onClick={handleSendMessage}\n          disabled={!user}\n          className={`w-full px-4 py-2 rounded-xl text-white ${user ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-400 cursor-not-allowed'}`}\n        >\n          إرسال الرسالة\n        </button>\n\n        {sent && <p className=\"text-green-500 mt-3\">تم إرسال رسالتك بنجاح ✅</p>}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}